<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AsisTeam - Registro de Asistencia DIBA FBC</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="d-flex flex-column min-vh-100">
  <header class="bg-dark text-light p-4 mb-4 text-center">
    <div class="container">
      <h1>AsisTeam - Registro de Asistencia</h1>
      <p class="lead">Club DIBA FBC - Control de asistencia por reconocimiento facial (Face++)</p>
    </div>
  </header>

  <main class="container flex-grow-1">
    <div class="row">
      <!-- Sección de Reconocimiento Facial -->
      <section id="face-section" class="col-md-5 mb-4">
        <div class="card">
          <div class="card-body text-center">
            <h2 class="card-title mb-4">Acceso / Registro</h2>
            <video id="video" width="100%" height="auto" autoplay muted playsinline></video>
            <button id="btn-capturar" class="btn btn-primary btn-lg w-100 mt-3">Capturar Rostro</button>
            <canvas id="canvas" width="640" height="480" style="display: none;"></canvas>
            <div id="face-message" class="alert d-none mt-3" role="alert"></div>
          </div>
        </div>
      </section>

      <!-- Sección de Asistencias Registradas -->
      <section id="registro-asistencia" class="col-md-7 mb-4">
        <h2 class="mb-3">Asistencias Registradas</h2>
        <ul id="lista-asistencias" class="list-group">
          <!-- Las asistencias se generan dinámicamente -->
        </ul>
      </section>
    </div>
  </main>

  <footer class="bg-light text-center py-3 mt-auto">
    <p class="mb-0">© 2025 DIBA FBC - Todos los derechos reservados</p>
  </footer>

  <!-- Script CDN de Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

  <!-- Script de Inicialización del Cliente Supabase -->
  <script>
    const SUPABASE_PROJECT_URL = 'https://wdnlqfiwuocmmcdowjyw.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkbmxxZml3dW9jbW1jZG93anl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg1MjY1ODAsImV4cCI6MjA2NDEwMjU4MH0.4SCS_NRDIYLQJ1XouqW111BxkMOlwMWOjje9gFTgW_Q';

    // Verifica si la librería se cargó y crea el cliente
    if (typeof supabase !== 'undefined' && typeof supabase.createClient === 'function') {
      window.supabase = supabase.createClient(SUPABASE_PROJECT_URL, SUPABASE_ANON_KEY);
      console.log('✅ Cliente Supabase inicializado correctamente.');
    } else {
      console.error('❌ Error: Supabase no se cargó correctamente o createClient no está disponible.');
    }
  </script>

  <!-- Tu script de lógica personalizada (faceplusplus.js) -->
  <script src="js/faceplusplus.js"></script>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
